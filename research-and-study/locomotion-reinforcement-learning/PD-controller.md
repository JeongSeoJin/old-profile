## The Reason of RL + PD Control
상위제어기(policy)가 모터에 직접 전압을 넣지 않고 하위제어기(PD Controller)를 거치는 이유는 학습효율과 안정성 때문이다.
고주파수 안정화 (High Frequency Stability)
RL (Brain): 보통 50Hz~100Hz로 돈다. (0.02초마다 생각함)
PD (Reflex): 보통 500Hz~1000Hz로 돈다. (0.001초마다 반응함)
만약 로봇이 돌뿌리에 걸렸을 때, RL이 "어? 넘어지네?"라고 생각하는 0.02초 사이에 이미 로봇은 넘어져 있다. 하지만 PD 제어기는 즉각적으로(Reflex) 반발력을 만들어 버텨준다. 이를 **"반사 신경"**이라고 보면 된다.
## PD Controller
Position based Torque Control의 형태를 갖고 있다. -> Impedance Control과 사실상 같다. 스프링-탬퍼 시스템으로 만들어준다.
$$\tau_{motor} = K_p (q_{target} - q_{current}) - K_d (\dot{q}_{current})$$

RL의 역할: $q_{target}$ (목표 위치)를 정해서 던져줌.
PD의 역할: 그 위치로 가기 위해 필요한 힘($\tau_{motor}$)을 계산함.
결과: 결국 모터에는 토크가 들어간다. 즉, **"위치 기반의 토크 제어"**를 하는 셈이다.
## Impedance Control
단일 엑츄에이터에 적용하여 사용할 수도 있고 Cartesian Impedance 방식으로 발끝 좌표만 넣어주면 로봇이 자코비안으로 계산하여 토크로 변환할 수도 있다.
-> 최근 연구 트렌드는 RL이 위치($q_{target}$)만 뱉는 게 아니라, $K_p, K_d$ 게인 값도 같이 뱉게 하는 것이다.

## Cartesian Impedance Control(보류)
환경과의 상호작용을 직관적으로 이해하기에 너무 좋다.
단점 : 자코비안의 특이점, 계산량, 모델 의존성 등의 문제로 인해 처음에 바로 적용하기에는 어려운 부분이 있음. RL로 하기에 굳이?라는 느낌이 있다.
오히려 단일 actuator 단독으로 PD제어를 사용하는 게 RL측면에서 더 좋을 수도 있다.
하지만, 만약 네가 나중에 아래와 같은 연구를 한다면 그때 Cartesian을 꺼내 들어라.

Manipulator(로봇 팔) 달린 4족 보행: 발로 문을 열거나 버튼을 눌러야 할 때 (정확한 좌표 제어 필요).
초고난도 지형(험지): 발이 닿는 순간의 충격량($F_z$)을 아주 정밀하게 제어해야 미끄러지지 않을 때.
HRI (인간 상호작용): 사람이 로봇을 밀었을 때 부드럽게 밀려주는 기능을 구현할 때.